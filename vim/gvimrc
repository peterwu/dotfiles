vim9script

# Remove GUI elements by default
set guioptions-=T
set guioptions-=m
set guioptions-=L
set guioptions-=r
set guioptions-=e

# Platform-specific settings
if has('macunix')
    set guifont=SF_Mono:h16
    set guioptions+=e
elseif has('win64')
    set guifont=SF_Mono:h12
    set renderoptions=type:directx
endif

# Keymaps
nnoremap <Leader>egv <Cmd>tabedit $MYGVIMRC<CR>
nnoremap <Leader>sgv <Cmd>source  $MYGVIMRC<CR>

# Toggle GUI elements
nnoremap <silent> <C-F1> <ScriptCmd>ToggleGuiOption('m')<CR>
nnoremap <silent> <C-F2> <ScriptCmd>ToggleGuiOption('T')<CR>
nnoremap <silent> <C-F3> <ScriptCmd>ToggleGuiOption('r')<CR>

def ToggleGuiOption(option: string)
    &guioptions = &guioptions =~# option
        ? &guioptions->substitute(option, '', 'g')
        : $'{&guioptions}{option}'
enddef

# Tab line appearance
set guitablabel=%{g:GetTabLabel(v:lnum)}%m
set guitabtooltip=%F
